*{ box-sizing:border-box }
:root{ --bg:#0b0d10; --fg:#e8ecf1 }
html,body{ height:100% }
body{
  margin:0; background:var(--bg); color:var(--fg);
  font-family: ui-monospace, Menlo, Consolas, "Courier New", monospace;
}

/* scanlines sutiles */
.scanlines{
  position:fixed; inset:0; pointer-events:none;
  background:repeating-linear-gradient(to bottom, #fff2 0 1px, transparent 1px 3px);
  mix-blend-mode:overlay; opacity:.12
}

/* overlay para iniciar audio en iOS/safari */
.enter{
  position:fixed; inset:0; display:grid; place-items:center;
  background:#000a; color:#e8ecf1; z-index:10; cursor:pointer;
  letter-spacing:.12em; text-transform:uppercase;
}
.enter.hidden{ display:none }

.stage{ min-height:100vh; display:grid; place-items:center; padding:2rem }
.diagram{ width:min(92vw, 980px); height:auto; display:block }

/* animaciones de pulso */
.heart{ transform-origin: 430px 320px; }
.heart.beat{ animation: beat .8s ease-in-out 1; }
@keyframes beat{
  0%{ transform:scale(1) }
  25%{ transform:scale(1.02) }
  50%{ transform:scale(1.035) }
  100%{ transform:scale(1) }
}
.pulse-overlay circle{ transform-origin: 430px 320px; opacity:0 }
.heart.beat .pulse-overlay circle{ animation: halo 0.8s ease-out 1; }
@keyframes halo{
  0%{ transform:scale(0.6); opacity:.18 }
  60%{ transform:scale(1.25); opacity:.07 }
  100%{ transform:scale(1.6); opacity:0 }
}

/* flor */
.flower{ transform-box: fill-box; transform-origin: center; opacity:0 }
.flower.bloom{ animation: bloom 1.2s ease-out forwards }
@keyframes bloom{
  0%{ transform: translate(520px,370px) scale(.2); opacity:0 }
  40%{ transform: translate(520px,370px) scale(.5); opacity:.4 }
  100%{ transform: translate(520px,370px) scale(1); opacity:.95 }
}
